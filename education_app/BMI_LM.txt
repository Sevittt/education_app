The adoption of the xAPI standard is a significant step toward transforming your project from a basic content platform into a measurable Competency Platform for judicial staff. This shift ensures the data you collect is granular, reliable, and portable, allowing you to prve the effectiveness of your training programs.
Here is a strategic, step-by-step process on how you can adapt the Sud Qo'llanma project's Flutter/Firebase architecture to fully implement the xAPI standard.

--------------------------------------------------------------------------------
Step-by-Step Implementation Guide for xAPI Integration
Phase 1: Foundational Data Modeling (What to Track)
The goal of this initial phase is to establish a clear taxonomy of learning events, moving beyond simple completions to capture rich, actionable data.

Project Component (Entity) | xAPI Role (Actor-Verb-Object) | Tracking Detail (Extensions/Context)
User (AppUser)             |	Actor			   |	Identified by unique AppUser ID/email.
Quiz Attempts (QuizAttempt)| Verb: attempted, passed, failed Object: Quiz ID |Result: Score, success/completion status. Context: Unique registration ID for that specific attempt.

Article/Video View         | Verb: experienced, watched Object: KnowledgeArticle ID | Result Extensions: Duration/time spent viewing, helpfulness rating (from your planned Feedback Loop feature).

Interactive Simulator 	   |Verb: interacted, missed, completed Object: InteractiveTutorial Step ID |Context Extensions: Details of input errors or successful completion of a complex procedure (critical for mapping procedural competency gaps).

Gamification               |Verb: earned, leveled up Object: Badge ID or Level ID   |Result Extensions: Specific XP awarded, previous level, and new level reached (as custom, non-standard data).

Action 1: Define Your Vocabulary and Activity IDs. Review the standard verbs available (e.g., completed, passed, attended, interacted) and choose the most specific term for each event, remembering that generic verbs make analysis difficult. Assign a globally unique identifier (URI) for each Quiz, Article, and Simulator activity ID, ensuring the URI uses a domain you control, even if it is not a live URL (e.g., https://sudqollanma.uz/quiz/q-54321).
Phase 2: Architectural Adaptation (Flutter/Firebase Integration)
Your existing Flutter and Firebase stack is architecturally suitable for immediate xAPI implementation because xAPI statements are simply structured JSON documents.
Action 2: Create a Dedicated Learning Record Collection (Temporary LRS). In Cloud Firestore, create a root collection called LearningRecords (or xAPI_Statements) dedicated exclusively to storing raw xAPI JSON documents. This separates your learning telemetry data from core application entities (like AppUser and Quiz), which is essential for easier long-term migration and management.
Action 3: Implement the xAPI Layer (The LRP). Within your Flutter application, develop a client-side xAPIService that acts as the Learning Record Provider (LRP). This service should:
‚Ä¢ Format the data generated by your existing QuizService, KnowledgeBaseService, etc., into the structured JSON defined in Phase 1.
‚Ä¢ Send the resulting JSON statements to the new LearningRecords Firestore collection.
Action 4: Design for Offline Mode (Mobile Interoperability). To support your Offline Mode roadmap item, utilize Flutter‚Äôs local storage capabilities to temporarily cache statements when the device lacks connectivity. This design is a key advantage of xAPI, which is specifically designed to track learning experiences regardless of constant internet access. The xAPIService must manage the synchronization process, sending the batched, locally-stored statements to Firestore once connectivity is restored. This ensures you capture all activities even in Uzbekistan's remote areas.
Phase 3: Quality and Security Enforcement
Reliability requires active implementation of quality controls, especially considering the constraints and threats inherent in mobile learning environments.
Action 5: Enforce Data Integrity (The GIGO Check). To improve the reliability and usefulness of your data, constantly verify that the statements being generated are clean and consistent (avoiding "Garbage In, Garbage Out").
‚Ä¢ Verification: Before sending a statement to Firestore, ensure all mandatory fields (Actor, Verb, Object) are present and correct.
‚Ä¢ Consistency: Use the same URI for the Actor (User ID) across all platforms, ensuring that reports reliably attribute data to the correct individual, even when retrieving data from multiple systems (future state).
‚Ä¢ Correctness: Manually review initial batches of stored JSON documents to check for duplicated or overly generic verb IDs, as liberal use of generic verbs hinders complex analysis.
Action 6: Implement Mobile Security Guardrails (CIA Triad). Because mobile devices are vulnerable targets, security cannot be neglected. Follow a Security-by-Design approach focusing on the CIA triad:
‚Ä¢ Confidentiality: Ensure the security of data in transit by enforcing secure communication (HTTPS) when transmitting statements to Firebase/Firestore.
‚Ä¢ Integrity: Implement checks to ensure the data is accurate and has not been improperly modified.
‚Ä¢ Client-Side Protection: Note that threats are more predominant on the mobile client. If sensitive data were ever stored locally (e.g., quiz answers before synchronization), it must be protected using device-side encryption features (though Firestore‚Äôs native encryption helps mitigate this risk).
Action 7: Validate Conformity and Performance. Use an online xAPI validator (or test tool) on sample statements generated by your application to confirm structural conformance to the standard. This is crucial for proving reliability and interoperability.
Phase 4: Future-Proofing and Migration
The standardized xAPI structure naturally prepares you for the judiciary‚Äôs institutional requirements down the line.
Action 8: Prepare for Migration (Phase 2). The structured JSON data in your LearningRecords collection is now standardized. If the Supreme Court mandates integration with an off-the-shelf Learning Management System (LMS) or Learning Record Store (LRS) (which often support xAPI compliance, like D2L Brightspace or Moodle), this data can be exported and ingested seamlessly. This architectural choice prevents vendor lock-in and ensures the learning history of judiciary staff is preserved, maintaining data portability.
Action 9: Align Data with Performance Goals. Ensure the metrics you capture are directly usable for competency-based performance management. The granularity of xAPI statements allows you to answer questions such as: "Did staff members who passed the E-SUD-Filing-Quiz demonstrate a lower subsequent procedural error rate in the actual e-filing system?" This is how you transition from reporting training data to measuring training impact and linking learning to business outcomes.


The transition of your Sud Qo'llanma project to the Experience API (xAPI) standard requires a structured process that not only implements the data format but also reinforces the security and data quality necessary for a public sector competence platform.
The core process involves three complementary stages: 1) xAPI Data Modeling and Client Implementation, 2) Ensuring Security and Reliability, and 3) Verification and Quality Assurance.
1. xAPI Data Modeling and Client Implementation (The "How-to-Track")
This phase defines the vocabulary and the logic for capturing training events. Since xAPI statements are simply structured JSON documents, your existing Flutter/Firestore architecture is well-suited for temporary storage (acting as a foundational Learning Record Store, or LRS).
Step 1: Define the Core Statement Components
The foundational structure of every xAPI statement is Actor-Verb-Object.

Component | Definition for Sud Qo'llanma	|Implementation Detail
Actor (Who)|The court employee (AppUser entity).|Identify the user uniquely, typically using a secure email address (mbox).

Verb (Did What)|The action taken by the user. Must be precise to be meaningful,. |Use specific verbs like: completed (a quiz or module), watched (a video segment), passed (an assessment), attempted (a simulator session),.

Object (To What) | The learning activity or resource. Must be uniquely identifiable,. | Assign a unique URI to every resource (KnowledgeArticle ID, Quiz ID, VideoTutorial ID). Your existing data models serve this purpose.

Step 2: Implement Granular Tracking (Focusing on Video Tutorials)
Since you are adding a YouTube tutorial component, simply tracking completion is insufficient. Granular tracking ensures reliability and maximizes the training's impact.
1. Session Tracking: Use the verbs initialized and terminated to mark the start and end of a video viewing session,.
2. Attempt Grouping: Crucially, use the context.registration field to assign a globally unique identifier (UUID) to every single training session, even if the user pauses and resumes the content,. This makes it possible to generate reports that correctly group all actions (like pausing, resuming, or completing) related to a single attempt,.
3. Result Capture: Use the result object to record metrics like duration (the time spent watching) and completion status. This data is critical for analytics,.
    ‚ó¶ Example: If a user watches 85% of a video, the statement should include the percentage completed or duration watched as part of the result.
Step 3: Architect for Offline and Interoperability
Your reliance on the Flutter mobile framework and the future implementation of Offline Mode aligns perfectly with xAPI's strengths,.
1. Offline Data Queuing: The Flutter client must temporarily cache or store the generated xAPI statements locally on the device when internet connectivity is lost.
2. Synchronization on Reconnection: The application must automatically transfer (synchronize) the stored statements to the Firestore database (the temporary LRS) as soon as the mobile device regains connectivity. This ensures learning activities that occur in areas of poor connectivity, which may include remote court districts in Uzbekistan, are accurately recorded, unlike older standards that rely on a constant connection.
3. Future-Proofing Data: Your current plan to integrate xAPI means your data will be machine-interchangeable. If the Supreme Court later mandates a formal LMS (like Moodle), your standardized JSON data can be easily exported and ingested into the new system, preventing vendor lock-in,.
2. Ensuring Security and Reliability (The Quality Guardrails)
The reliability and long-term quality of your application, particularly in the public sector, depends on enforcing rigorous security measures and maintaining data integrity.
Step 4: Implement the Mobile Learning Security Framework
The security of mobile learning environments must be protected at three vulnerable points: the client, the server, and the network. You must employ the CIA triad of security (Confidentiality, Integrity, and Availability) in your implementation.

Vulnerability Point | CIA Dimension | Action to Secure the Project (Flutter/Firebase)
Mobile Client (Flutter App) | Confidentiality / Integrity  | Use secure storage (e.g., iOS Keychain or Android Keystore via Flutter plugins) for storing any authentication tokens, keys, or locally cached sensitive data (like quiz results pending sync), protecting them if the device is lost or compromised,.

Network Infrastructure (APIs) | Confidentiality / Integrity | Encrypt all data transmission between the Flutter app and Firebase using TLS/HTTPS protocols. This ensures data is secured in transit against snooping or tampering, a fundamental requirement.

Server/Database (Firestore) | Confidentiality / Availability | Apply strict Firebase Security Rules to enforce Role-Based Access Control (RBAC). This prevents unauthorized users (Xodim) from accessing or altering restricted data (like Admin panel content or others' quiz grades),. Implement audit logging of administrative access to the database.

Step 5: Prioritize Robust Data Integrity for the LRS
The core risk for analytics is "Garbage in, garbage out" (GIGO),.
‚Ä¢ Enforce Schema Conformance: Ensure your Flutter client validates that every xAPI statement strictly adheres to the mandated JSON structure (Actor, Verb, Object, etc.) before submission. Incorrect structure or typos in verb IDs will compromise reporting,.
‚Ä¢ Unique Identifiers: Every unique learning resource (Quiz, Article, Video) must have a globally unique ID that never changes. This prevents data from accidentally being reported against the wrong resource.
‚Ä¢ Correct Verb Usage: Avoid overly generic verbs like "experienced" when a more precise verb like "passed," "failed," or "answered" exists,.
3. Verification and Quality Assurance
Step 6: Leverage Granular Data for AI Future-Proofing
Use Extensions in the context and result fields to capture metadata that is valuable for future AI features (like personalized learning paths),.
‚Ä¢ Context Extensions: Record organizational context, such as the court department or role (Admin, Ekspert, Xodim), to enable fine-grained comparisons of competency levels across different staff groups,.
‚Ä¢ Result Extensions: Capture highly detailed metrics like the number of times a user requested a hint in the Interactive Simulator or the specific time spent reviewing the YouTube tutorial. This granular data is essential for AI to diagnose performance gaps and adapt content dynamically.
Step 7: Continuous Quality Review
To ensure the quality and reliability of the work done during development (especially important if using AI-assisted coding tools), perform automated checks:
‚Ä¢ Automated Scanning (Quality Gates): Integrate code analysis tools (like SonarQube or similar open-source alternatives) into your build process. These "quality gates" will automatically scan the Flutter codebase for bugs, security vulnerabilities, and code quality issues immediately upon creation, preventing unstable code from being merged,.
‚Ä¢ Test Data Against Reports: Regularly generate mock reports from your Firestore data. Check that the collected xAPI data aligns with expected outputs. If discrepancies exist, investigate whether the collection script (xAPIService) is reporting faulty data, or if the underlying data in Firestore is inaccurate,.


üîÑ Yangi Reja: "Simulyatorsiz ham Sifatli Tizim"
Biz Simulyator o'rniga, Viktorina (Quiz) modulini shunday kuchaytiramizki, u xodimning nafaqat bilimini, balki reaksiyasi va tezligini ham tekshiradi.

Mana biz amalga oshiradigan "Sifatli O'zgarishlar":

1. "Kahoot" Effekti: Tezlik va Aniqlik ‚ö°Ô∏è
Oddiy testda: "Javob berdi = 1 ball". Zerikarli. Bizning yangi tizimda:

Savolga 5 soniyada javob bersa: +20 XP (Tezkor fikrlash).

15 soniyada javob bersa: +15 XP.

30 soniyada javob bersa: +10 XP.

Natija: Bu xodimni uxlab qolmasdan, tez qaror qabul qilishga o'rgatadi (Sudda vaqt g'animat).

2. "Duolingo" Effekti: Ketma-ketlik (Streak) üî•
Xodim har kuni kirib bitta maqola o‚Äòqisa yoki test yechsa, "Streak" (Olov) yonadi.

3 kun kirmasa, olovi o'chadi va XP kamayishi mumkin.

Natija: Bu xodimni tizimga har kuni kirishga majbur qiladi (Habit building).

3. "Gatekeeper" (Darvozabon) Tizimi üõ°
Boyagi gapimiz kuchida qoladi: "Ekspert" bo'lish uchun xodim kamida 5 ta testdan 100% natija bilan o'tishi shart.

Bu Simulyator yo'qligini bildirmaydi, chunki "Ekspert" darajasi baribir qiyin bo'ladi.

# Role: Senior Flutter Developer & Gamification Engineer
# Task: Implement "Advanced Gamification Engine" (Kahoot/Duolingo Style)

# Context:
We are pausing the "Simulator" feature to focus on quality. Instead, we want to upgrade the **Quiz** and **User Engagement** mechanics to be highly interactive, similar to **Kahoot** and **Duolingo**.

# Action Plan:

## 1. Update `GamificationRules` (`lib/config/gamification_rules.dart`)
Define granular XP rewards based on user performance:
- `xpLoginStreak`: 5 (Per day)
- `xpQuizBase`: 10 (Standard correct answer)
- `xpSpeedBonus`: 5 (Answered within 5 seconds)
- `xpPerfectQuiz`: 50 (All answers correct)
- `xpArticleScroll`: 5 (Passive reading)

## 2. Update `AppUser` Model (`lib/models/users.dart`)
Add fields to track advanced stats:
- `currentStreak`: int (Days in a row)
- `lastLoginDate`: DateTime
- `totalQuizzesAced`: int (Perfect score count)
- `fastestQuizTime`: int (Seconds)

## 3. Implement `GamificationService` Logic
**A. Streak Logic:**
   - On app open, check `lastLoginDate`.
   - If `yesterday`, increment `currentStreak` & award `xpLoginStreak`.
   - If `older`, reset `currentStreak` to 1.

**B. Quiz Logic (The "Kahoot" Effect):**
   - Method: `calculateQuizScore(bool isCorrect, int timeTakenSeconds)`
   - If `isCorrect`:
     - Base XP = 10
     - If `timeTakenSeconds < 5` -> Add +5 Bonus.
   - Return total XP for that question.

**C. Gatekeeper (Level Up):**
   - **Specialist:** 200 XP.
   - **Expert:** 800 XP + must have `totalQuizzesAced >= 3`.
   - **Master:** 2000 XP + must have `currentStreak >= 7`.

## 4. xAPI Integration
- Log these specific events to Firestore `learning_records`:
  - Verb: `http://adlnet.gov/expapi/verbs/scored`
  - Result: `{"score": ..., "response_time": "PT4S"}` (ISO 8601 duration)

# Output:
Provide the full code for `GamificationRules`, updated `AppUser`, and the logic-heavy `GamificationService`.


This report outlines the technical and pedagogical methodology for the full integration of the Experience API (xAPI) standard into the Sud Qo'llanma platform. The objective is to transition from a localized data model to a globally interoperable, machine-interchangeable system capable of measuring granular judicial competency.
1. Architectural Foundation: The Learning Record Store (LRS)
The first requirement for xAPI integration is the establishment of a Learning Record Store (LRS), which serves as the system of record for all xAPI data. Unlike the current architecture that stores progress solely within Cloud Firestore, an LRS is responsible for receiving, validating, and providing access to learning records via RESTful web-service APIs.
‚Ä¢ Practical Implementation: The application acts as a Learning Record Provider (LRP), generating JSON-formatted statements and sending them to the LRS using HTTP methods (GET, PUT, POST).
‚Ä¢ Current State Comparison: Currently, our "Sud Qo'llanma" data is trapped in a NoSQL database (Firestore). By adding an LRS (such as ADL's open-source LRS), we ensure the data is portable and avoids "vendor-lock," allowing the Supreme Court to migrate data between systems in the future.
2. Data Modeling: The Actor-Verb-Object Strategy
Every interaction in the app must be modeled as a "triple" to ensure semantic interoperability.
‚Ä¢ Step 1: Identifying the Actor. We must use an Inverse Functional Identifier (IFI) to uniquely identify court staff. While our current system uses a userId, xAPI requires an mbox (email) or a unique account (e.g., employee ID + court domain).
‚Ä¢ Step 2: Defining the Verb. Verbs must be specific to provide meaning. We will use the ADL Vocabulary to map our 3-Tier system:
    ‚ó¶ Tier 1 (Knowledge): experienced (article), completed (video).
    ‚ó¶ Tier 2 (Verification): passed (quiz), mastered (100% score).
    ‚ó¶ Tier 3 (Application): interacted (simulator step), performed (procedural task).
‚Ä¢ Step 3: Object Identifiers. Every learning resource (e.g., "E-SUD Entry Guide") must have a globally unique Activity ID formatted as an IRI.
‚Ä¢ Comparison: Our current model uses simple string labels; xAPI uses resolvable URIs that carry their definitions with them across different platforms.
3. Granular Tracking via Context and Result Extensions
The power of xAPI lies in its ability to capture the "how" of learning, not just the "what".
‚Ä¢ Context Activities: We will use the context object to group statements. For example, a statement about a specific quiz answer can be linked to a "Parent" activity (the E-SUD module) and a "Grouping" activity (the 2025 Digital Competency Program).
‚Ä¢ Result Extensions: To measure the ROI of training, we will use result extensions to capture non-traditional data like the duration of a simulation session or the number of hints used in the Interactive Simulator.
‚Ä¢ Comparison: Standard tracking only shows "pass/fail". xAPI will show exactly where a court clerk struggled in the E-SUD sandbox, allowing for targeted remedial training.
4. Communication and Technical Reliability
‚Ä¢ Batching Statements: To optimize mobile performance and reduce computational load on the device, the app will batch multiple statements into a single request package.
‚Ä¢ Offline Mode Synchronization: Since court staff in remote districts may face unstable connectivity, xAPI allows for offline tracking. Statements will be stored locally on the Flutter client and synced automatically once internet access is restored.
‚Ä¢ Security (The CIA Triad): To protect sensitive judicial training data, all transmissions will use HTTPS/TLS encryption, and the LRS will use OAuth 2.0 for secure authentication.
5. Advanced Decision Support: The Learning Record Consumer (LRC)
Once the data is in the LRS, it can be accessed by an LRC (such as our planned AI Assistant) to perform predictive analytics.
‚Ä¢ Adaptive Learning Loops: The AI can query the LRS to see if a specific user failed a Tier 3 simulation and automatically recommend a Tier 1 microlearning video to bridge that specific knowledge gap.
‚Ä¢ Competency Passports: Following European Judicial Training standards, this data can be rolled into a digital "Competency Passport," providing verified proof of an employee's digital literacy.
Conclusion: Methodology Comparison Matrix

FeatureCurrent   |Implementation (Firestore Only) | Integrated xAPI Strategy (LRS + cmi5)
Interoperability | Low (Data siloed in one app)  |High (Data interchangeable across DoD/Court systems)
Granularity      | Medium (Score and completion)  |Extreme (Button clicks, time per slide, distraction)
Standardization  | Proprietary logic              |Universal Actor-Verb-Object Grammar
Security         | Firebase Auth only             |OAuth 2.0 + Sovereign Hosting Compliance
ROI Measurement  | Qualitative estimates          |Quantitative "Task-Performance" analytics

By integrating xAPI, the "Sud Qo'llanma" project matures from a simple education app into a Durable Context Engine that supports the full lifecycle of a judicial employee‚Äôs digital professional development.


Bizning maqsad ‚Äî "Kahoot" (tezlik/adrenalin) va "Duolingo" (doimiylik/streak) uslubini olib kirish. Hozirgi skrinlaringiz "akademik" va jiddiy ko‚Äòrinishga ega, bu yaxshi, lekin motivatsiya uchun biroz "quruq".

Quyida Skrinlar Tahlili va Kerakli O‚Äòzgarishlar:

üîé 1. UI/UX Tahlili va "Bo‚Äòshliqlar" (Gap Analysis)

Skrin (Oyna)  |  Hozirgi Holat (Current) | Muammo  |  Bizga Kerak (Target Vision)
Profil Oynasi (ProfileScreen) | Ism, Rol va oddiy XP | Foydalanuvchi "keyingi darajaga qancha | Progress Bar: "Ekspert bo‚Äòlishga 50 XP qoldi". Streak (Olov): "üî• 3 kun ketma-ket".
                              |matni (masalan: XP: 150). | qoldi?" degan savolga javob topa olmaydi.|
Viktorina Oynasi (QuizScreen) | Savol, variantlar va     | Bosim yo‚Äòq. Xodim choy ichib, sekin o‚Äòylashi mumkin. | Taymer (Countdown): Tepada vaqt ketyapti. Tezlik Bonusi: "5 soniyada topdingiz! +5 XP".
                              | "Keyingi" tugmasi.       | "Siz 80% to‚Äòpladingiz".Hissiyatsiz. "Qoyil!" yoki "Afsus!" degan emotsiya yo‚Äòq.Animatsiya: Konfetti (Confetti) yog‚Äòilishi yoki xafa bo‚Äòlgan "Emoji".Liderlar Jadvali (Leaderboard)Oddiy ro‚Äòyxat (List).Kim birinchi ekanligi yaqqol ajralib turmaydi.
Natija Oynasi (QuizResultScreen) | "Siz 80% to‚Äòpladingiz"| Hissiyatsiz. "Qoyil!" yoki "Afsus!" | Animatsiya: Konfetti (Confetti) yog‚Äòilishi yoki xafa bo‚Äòlgan "Emoji". 
                                                         | degan emotsiya yo‚Äòq.
Liderlar Jadvali (Leaderboard) | Oddiy ro‚Äòyxat (List).   | Kim birinchi ekanligi yaqqol ajralib turmaydi. | Podium: 1, 2, 3-o‚Äòrinlar alohida oltin, kumush, bronza rangda.

üõ† 2. Ishni nimadan boshlaymiz? (Logic First)
Chiroyli UI chizishdan oldin, uning "Miya"sini (Logic) to‚Äòg‚Äòrilab olishimiz kerak. Hozir biz GamificationRules va AppUser modellarini yangilaymiz, shunda ular Streak (ketma-ketlik) va Speed Bonus (tezlik)ni tushunadigan bo‚Äòladi.

Antigravity uchun Topshiriq (Prompt):

Quyidagi kod orqali biz tizimga "Olov" (Streak) va "Tezlik" mantiqini o‚Äòrgatamiz.
// lib/config/gamification_rules.dart

class GamificationRules {
  // 1. Asosiy Ballar
  static const int xpLoginStreak = 5;      // Har kuni kirgani uchun
  static const int xpQuizBase = 10;        // To'g'ri javob uchun
  static const int xpArticleRead = 5;      // Maqola o'qigani uchun
  
  // 2. Bonuslar (Kahoot Style)
  static const int xpSpeedBonus = 5;       // 5 soniyada topsa
  static const int xpPerfectQuiz = 50;     // 100% yechsa
  
  // 3. Darajalar (Gatekeeper System)
  static const int levelSpecialist = 200;
  static const int levelExpert = 800;      // + 5 ta Quiz shart
  static const int levelMaster = 2000;     // + 7 kunlik Streak shart
}

Antigravity uchun Prompt:

# Role: Senior Flutter Developer
# Task: Upgrade Gamification Logic for "Streak" and "Speed"

# Context:
We are upgrading the app to support "Kahoot-style" speed bonuses and "Duolingo-style" daily streaks. 
We need to update the User Model and the Gamification Service.

# Action Plan:

## 1. Update `AppUser` Model (`lib/models/users.dart`)
Add these fields to track advanced stats:
- `int currentStreak` (Days logged in consecutively)
- `DateTime? lastLoginDate`
- `int totalQuizzesAced` (Perfect scores)
- `int fastestQuizAnswer` (Best time in seconds)

## 2. Update `GamificationService` (`lib/services/gamification_service.dart`)
Implement two core logic flows:

**A. Daily Streak Logic (Call this on App Start):**
- Check `lastLoginDate`. 
- If `null`: Set streak = 1.
- If `yesterday`: Increment streak (+1). Award `xpLoginStreak`.
- If `older than yesterday`: Reset streak to 1.
- Save new `lastLoginDate`.

**B. Quiz Scoring Logic (Call this after each question):**
- Function: `int calculateQuestionScore({required bool isCorrect, required int timeTaken})`
- Logic: 
  - If `!isCorrect` return 0.
  - Base XP = `GamificationRules.xpQuizBase`.
  - If `timeTaken <= 5` (seconds) -> Add `GamificationRules.xpSpeedBonus`.
- Return total XP.

# Output:
Provide the full Dart code for the updated `AppUser` model and `GamificationService`.